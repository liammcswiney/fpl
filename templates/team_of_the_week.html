<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        html {
            height: 100%;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            background: linear-gradient(135deg, #4a90e2, #50e3c2); /* Slight adjustment for smoother gradient */
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .top-container {
            width: 60%;
            height: auto;
            margin: 0 auto 20px;
            padding: 0px;
            background: linear-gradient(135deg, #4a90e2, #50e3c34c); /* Match with body gradient */
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
            z-index: 2;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header {
            width: 70%;
            padding: 0px;
            background:#302d2d16; 
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0);
            z-index: 2;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header h1 {
            color: #fff;
            text-align: center;
            margin: 15px 0;
            font-size: 25px;
        }

        .button-row {
            display: flex;
            padding: 10px;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 0px;
        }

        .player-of-the-week {
            position: relative;
            padding: 2px 10px;
            margin: 0 10px;
            /* background:#4acfff0f; 
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16); */
            color: #fff;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease; /* Added a quick transform transition */
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center; /* Centers the content */
        }

        .menu {
            position: relative;
            width: 40%; /* Make the menu full width */
            margin: 0 auto; /* Center the menu horizontally */
            background-color: #428bca00; /* Set a background color for the menu */
            top: -10px;
            padding: 0px; /* Add padding as desired */
            box-sizing: border-box; /* Include padding in the width calculation */
            z-index: 1;
        }

        .team-container {
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            height: 550px;
            background: linear-gradient(to bottom, 
                #36b017 0%, #36b017 10%, 
                #36b715 10%, #36b715 20%, 
                #36b017 20%, #36b017 30%, 
                #36b715 30%, #36b715 40%, 
                #36b017 40%, #36b017 50%, 
                #36b715 50%, #36b715 60%, 
                #36b017 60%, #36b017 70%, 
                #36b715 70%, #36b715 80%, 
                #36b017 80%, #36b017 90%, 
                #36b715 90%, #36b715 100%);
            position: relative; 
            padding-top: 20px;
            width: 40%;
            margin: 0 auto;
            border: 2px solid #fff;
            z-index: 0;
        }

        .penalty-box1 {
            position: absolute;
            top: 0%; 
            left: 28%; 
            width: 44%; 
            height: 15%; 
            border-right: 2px solid #fff;
            border-bottom: 2px solid #fff;
            border-left: 2px solid #fff;
            z-index: -1;
        }

        .halfway-line2 {
            position: absolute;
            top: 65%; /* Adjust the top position of the penalty box as needed */
            left: 40%; /* Adjust the left position of the penalty box as needed */
            width: 20%; /* Adjust the width of the penalty box as needed */
            height: 18%; /* Adjust the height of the penalty box as needed */
            border: 2px solid #fff; /* Add white dashed border */
            border-radius: 50%; /* Create a circle */
            z-index: -1;
            box-sizing: border-box; /* Ensure the border is included in the dimensions */
            background-color: transparent; /* Make the background transparent */
        }

        .player-row {
            display: flex;
            justify-content: space-evenly;
            width: 100%;
        }

        .player-position {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 15%; 
            height: 80px;
            margin: 5px;
            padding: 5px; 
            background-color: rgba(205, 195, 195, 0.3); 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); 
            font-size: 15px; 
            border-radius: 10%;
        }
        
        
        .player-position .name {
            margin-bottom: 2px; /* Adjust the spacing */
            font-size: 10px; /* Adjust the font size */
        }

        .player-position .icon {
            width: 40px; 
            height: 40px; 
            border-radius: 50%;
            background-color: #00ffd9;
            font-size: 14px; 
            margin-top: 5px; 
            position: relative;
            border: 2px solid black; 
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .player-position .icon:hover {
            background-color: #00d5d1;
            transform: scale(1.05); /* Slightly enlarges button on hover for feedback */
        }

        .total-price {
            position: absolute;
            top: 10px;
            right: 10px;
            font-weight: bold;
        }

        .bench-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #2b7917;
            padding: 0px;
            height: 28%;
            width: 100%; /* Adjust the width as needed */
            border: 2px solid #fff; 
            margin-top: auto; /* Push the bench container to the bottom */
        }

        .bench-container h2 {
            color: white;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .bench-container .player-list {
            display: flex;
            justify-content: space-evenly;
            width: 100%;
            margin: 0px;
            padding: 10px;
            background-color: rgba(205, 195, 195, 0.3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            font-size: 15px;
            height: 70px;
        }

        .bench-container .player-list .player-position {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 20%;
            margin-bottom: 10px;
        }

        .bench-container .player-list li {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }

        .bench-container .player-list .icon {
            width: 40px; 
            height: 40px; 
            border-radius: 50%;
            background-color: rgb(15, 200, 206);
            margin-bottom: 3px;
            border: 2px solid #000000; 
            margin-top: 15px; 
        }

        .bench-container .player-list .name {
            margin-top: 2px;
            font-size: 10px; 
        }


        .form-wrapper {
            display: flex;
            gap: 10px; /* Adjust the gap as needed */
        }

        .name {
            margin-top: 5px;
            font-weight: bold;
        }
        
        .points {   
            font-size: 12px;
            font-weight: bold;
        }

        .show {
            display: block;
        }

        .return-button {
            position: absolute;
            top: -5px; 
            left: 10px; 
            padding: 5px 15px;
            background-color: #dd0e0e;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease; 
            font-weight: 500;
        }

        .return-button:hover {
            background-color: #cc0d0d;
            transform: scale(1.05);
        }

        .info-button {
            position: absolute;
            top: -5px;
            right: 10px;
            padding: 7px 20px;
            background-color: #9c9c9c;
            color: #fff;
            border: none; /* Removing the border */
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
            transition: background-color 0.3s ease, box-shadow 0.3s ease; /* Transition for shadow too */
        }

        .info-button:hover {
            background-color: #b8b8b8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Enhanced shadow on hover */
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #d5fff8, #a7fff2);
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            max-height: 60vh;
            border: 2px solid #000000; 
            border-radius: 2%;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            z-index: 9998;
        }

        #popup h2 {
            margin-top: 0;
            text-align: center;
        }

        #popup table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        #popup th, #popup td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid black;
        }

        #popup th {
            font-weight: bold;
        }

        #popup td:last-child {
            text-align: right;
        }

        #popup td:first-child {
            text-transform: capitalize;
        }

        #popup tr:nth-child(1) {
            border-bottom: 2px solid black;
        }

        
        #popup tr:last-child {
            border-bottom: 2px solid black;
            font-weight: bold;
        }

        #popup tr:nth-last-child(2):not(:last-child) {
            border-bottom: 2px solid black;
        }

        .info-table-popup {
            position: fixed;
            left: 50%; 
            top: 50%;  
            transform: translate(-50%, -50%); 
            width: 50%; /* Increased width from 30% to 50% */
            height: 75%; 
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000; 
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 2%;
        }

        .info-table-popup-content {
            position: relative;
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #d5fff8, #a7fff2);
            overflow-y: auto; 
            padding: 20px;
            box-sizing: border-box; 
            border-radius: 2%;
        }
        
        /* Styling the tables inside the popup */
        .info-table-popup-content table {
            width: 80%;
            border-collapse: collapse;   
            margin: 20px auto; /* Center the table horizontally and provide vertical space */
            border-radius: 5%;
        }

        .info-table-popup-content table th {  
            text-align: center;   
            padding: 8px;   
            background-color: #9de8ff;
        }

        .info-table-popup-content table td {
            text-align: center;   
            padding: 8px;   
            background-color: #c8efff;
        }

        .info-table-popup-content h2 {
            text-align: center; 
            font-size: 30px; 
            font-weight: bold; /* Make the h2 bold */
            margin-top: 20px;   
            margin-bottom: 20px; 
        } 

        .info-table-popup-content::-webkit-scrollbar {
            width: 10px; 
        }

        .info-table-popup-content::-webkit-scrollbar-track {
            background-color: #f2f2f2; 
            border-radius: 10px; 
        }

        .info-table-popup-content::-webkit-scrollbar-thumb {
            background-color: #428bca;
            border-radius: 10px;
            border: 2px solid #f2f2f2; 
        }

        .info-table-popup-content::-webkit-scrollbar-thumb:hover {
            background-color: #337ab7;
        }


    </style>

<script>
    
    function goBack() {
        window.location.href = "/fixtures/{{ team_name }}";
    }


    function showPopup(playerIndex) {
        var popup = document.getElementById('popup');
        var overlay = document.getElementById('overlay');

        // Set the player stats in the popup
        popup.innerHTML = getPlayerStatsHtml(playerIndex);

        // Show the popup and overlay
        popup.style.display = 'block';
        overlay.style.display = 'block';
    }

    function getPlayerStatsHtml(playerIndex) {
        var stats = JSON.parse('{{ player_scores_breakdown|tojson|safe }}');

        var player = stats['Player'][playerIndex];
        var position = stats['Position'][playerIndex];
        var minutes = stats['Minutes'][playerIndex];
        var score = stats['Score'][playerIndex];
        var goals = stats['Goals'][playerIndex];
        var assists = stats['Assists'][playerIndex];
        var saves = stats['Saves'][playerIndex];
        var penalty_saved = stats['Penalty Saved'][playerIndex];
        var penalty_missed = stats['Penalty Missed'][playerIndex];
        var clean_sheet = stats['Clean Sheet'][playerIndex];
        var conceded = stats['Conceded'][playerIndex];
        var yellow_cards = stats['Yellow Cards'][playerIndex];
        var red_cards = stats['Red Cards'][playerIndex];
        var own_goals = stats['Own Goals'][playerIndex];
        var bonus = stats['Bonus'][playerIndex];

        var html = '<h2>' + player + '</h2>';
        html += '<table>';
        html += '<tr><th>Points</th><th>Value</th><th>Total Points</th></tr>';

        html += '<tr>';
        html += '<td>Minutes</td>';
        html += '<td>' + minutes + '</td>';

        if (minutes === 40) {
            html += '<td>' + 2 + 'pts</td>';
        } else {
            html += '<td>' + 0 + 'pts</td>';
        }

        html += '</tr>';

        if (goals > 0) {
            html += '<tr>';
            html += '<td>Goals</td>';
            html += '<td>' + goals + '</td>';

            if (position === 'DEF' || position === 'GK') {
                html += '<td>' + goals * 6 + 'pts</td>';
            } else if (position === 'MID') {
                html += '<td>' + goals * 5 + 'pts</td>';
            } else if (position === 'FWD') {
                html += '<td>' + goals * 4 + 'pts</td>';
            }

            html += '</tr>';
        }

        if (assists > 0) {
            html += '<tr>';
            html += '<td>Assists</td>';
            html += '<td>' + assists + '</td>';
            html += '<td>' + assists * 3 + 'pts</td>';
            html += '</tr>';
        }

        if (saves > 0) {
            html += '<tr>';
            html += '<td>Saves</td>';
            html += '<td>' + saves + '</td>';

            if (position === 'GK') {
                html += '<td>' + Math.floor(saves / 2) + 'pts</td>';
            }

            html += '</tr>';
        }

        if (clean_sheet > 0) {
            html += '<tr>';
            html += '<td>Clean Sheet</td>';
            html += '<td>' + 1 + '</td>';
            html += '<td>' + clean_sheet + 'pts</td>';
            html += '</tr>';
        }

        if (penalty_saved > 0) {
            html += '<tr>';
            html += '<td>Penalty Saved</td>';
            html += '<td>' + penalty_saved + '</td>';
            html += '<td>' + penalty_saved * 5 + 'pts</td>';
            html += '</tr>';
        }

        if (conceded > 1) {
            html += '<tr>';
            html += '<td>Conceded</td>';
            html += '<td>' + conceded + '</td>';
            html += '<td>' + Math.floor(conceded / 2) * -1 + 'pts</td>';
            html += '</tr>';
        }

        if (yellow_cards > 0) {
            html += '<tr>';
            html += '<td>Yellow Cards</td>';
            html += '<td>' + yellow_cards + '</td>';
            html += '<td>' + yellow_cards * -1 + 'pts</td>';
            html += '</tr>';
        }

        if (red_cards > 0) {
            html += '<tr>';
            html += '<td>Red Cards</td>';
            html += '<td>' + red_cards + '</td>';
            html += '<td>' + red_cards * -3 + 'pts</td>';
            html += '</tr>';
        }

        if (penalty_missed > 0) {
            html += '<tr>';
            html += '<td>Penalty Missed</td>';
            html += '<td>' + penalty_missed + '</td>';
            html += '<td>' + penalty_missed * -2 + 'pts</td>';
            html += '</tr>';
        }

        if (own_goals > 0) {
            html += '<tr>';
            html += '<td>Own Goals</td>';
            html += '<td>' + own_goals + '</td>';
            html += '<td>' + own_goals * -2 + 'pts</td>';
            html += '</tr>';
        }

        if (bonus > 0) {
            html += '<tr>';
            html += '<td>Bonus</td>';
            html += '<td>' + bonus + '</td>';
            html += '<td>' + bonus + 'pts</td>';
            html += '</tr>';
        }

        html += '<tr>';
        html += '<td>Total</td>';
        html += '<td>' + '' + '</td>';
        html += '<td>' + score + 'pts</td>';
        html += '</tr>';

        html += '</table>';

        return html;
    }

    function hidePopup() {
        var popup = document.getElementById('popup');
        var overlay = document.getElementById('overlay');

        popup.style.display = 'none';
        overlay.style.display = 'none';
    }

    function toggleInfoTablePopup() {
        const popup = document.getElementById('infoTablePopup');
        var overlay = document.getElementById('overlay1');
        if (popup.style.display === 'none' || !popup.style.display) {
            popup.style.display = 'block';
            overlay.style.display = 'block';
        } else {
            popup.style.display = 'none';
        }
    }

    function hideInfoTablePopup() {
        const popup = document.getElementById('infoTablePopup');
        var overlay = document.getElementById('overlay1');

        popup.style.display = 'none';
        overlay.style.display = 'none';
    }
    
</script>
</head>
<body>
    <div class="top-container">
        <div class="header">
            <h1>Gameweek {{ match }}: Team of the Week</h1>
        </div>
        <div class="button-row">
            <div class="player-of-the-week">
                <h2>Player of the Week: {{ man_of_match }}</h2>
            </div>
        </div>
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <div class="menu">
        <button class="return-button" onclick="goBack()">X</button>
        <button class="info-button fa fa-info" style="font-size: 14px;" onclick="toggleInfoTablePopup()"></button>
    </div>
    <div class="container">
        <div class="info-table-popup" id="infoTablePopup" style="display:none;">
            <div class="info-table-popup-content">
                <h2>Liz Trussard: {{ goals_for }} - {{ goals_against }} {{ opponent }}</h2>

                {% set ns = namespace(found=False) %}
                {% for goals in player_scores_breakdown['Goals'] %}
                    {% if goals > 0 %}
                        {% set ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Goals</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goals in goals_ordered['Goals'] %}
                                {% if goals > 0 %}
                                    <tr>
                                        <td>
                                            {{ goals_ordered['Player'][loop.index0] }} {% if goals > 1 %} ({{ goals }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set assists_ns = namespace(found=False) %}
                {% for assist in player_scores_breakdown['Assists'] %}
                    {% if assist > 0 %}
                        {% set assists_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if assists_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Assists</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for assists in assists_ordered['Assists'] %}
                                {% if assists > 0 %}
                                    <tr>
                                        <td>
                                            {{ assists_ordered['Player'][loop.index0] }} {% if assists > 1 %} ({{ assists }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set saves_ns = namespace(found=False) %}
                {% for save in player_scores_breakdown['Saves'] %}
                    {% if save > 0 %}
                        {% set saves_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if saves_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Saves</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for saves in player_scores_breakdown['Saves'] %}
                                {% if saves > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if saves > 1 %} ({{ saves }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set penalty_saved_ns = namespace(found=False) %}
                {% for penalty_saved in player_scores_breakdown['Penalty Saved'] %}
                    {% if penalty_saved > 0 %}
                        {% set penalty_saved_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if penalty_saved_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Penalty Saved</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for penalty_saved in player_scores_breakdown['Penalty Saved'] %}
                                {% if penalty_saved > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if penalty_saved > 1 %} ({{ penalty_saved }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set penalty_missed_ns = namespace(found=False) %}
                {% for penalty_missed in player_scores_breakdown['Penalty Missed'] %}
                    {% if penalty_missed > 0 %}
                        {% set penalty_missed_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if penalty_missed_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Penalty missed</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for penalty_missed in player_scores_breakdown['Penalty Missed'] %}
                                {% if penalty_missed > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if penalty_missed > 1 %} ({{ penalty_missed }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set yellow_cards_ns = namespace(found=False) %}
                {% for card in player_scores_breakdown['Yellow Cards'] %}
                    {% if card > 0 %}
                        {% set yellow_cards_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if yellow_cards_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Yellow Cards</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for card in player_scores_breakdown['Yellow Cards'] %}
                                {% if card > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if card > 1 %} ({{ card }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set red_cards_ns = namespace(found=False) %}
                {% for card in player_scores_breakdown['Red Cards'] %}
                    {% if card > 0 %}
                        {% set red_cards_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if red_cards_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Red Cards</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for card in player_scores_breakdown['Red Cards'] %}
                                {% if card > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if card > 1 %} ({{ card }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}

                {% set own_goals_ns = namespace(found=False) %}
                {% for goal in player_scores_breakdown['Own Goals'] %}
                    {% if goal > 0 %}
                        {% set own_goals_ns.found = True %}
                    {% endif %}
                {% endfor %}

                {% if own_goals_ns.found %}
                    <table>
                        <thead>
                            <tr>
                                <th>Own Goals</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goal in player_scores_breakdown['Own Goals'] %}
                                {% if goal > 0 %}
                                    <tr>
                                        <td>
                                            {{ player_scores_breakdown['Player'][loop.index0] }} {% if goal > 1 %} ({{ goal }}) {% endif %}
                                        </td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
                <table>
                    <thead>
                        <tr>
                            <th>Bonus Points</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for goal in bonus_ordered['Bonus'] %}
                            {% if goal > 0 %}
                                <tr>
                                    <td>
                                        {{ bonus_ordered['Player'][loop.index0] }} {% if goal > 1 %} ({{ goal }}) {% endif %}
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>

            </div>
        </div>
        <div class="team-container">
            <div class="penalty-box1"></div>
            <div class="halfway-line2"></div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(0)">
                        {% if man_of_match == sorted_player_scores['Player'][0] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][0] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][0] }}</div>
                </div>
            </div>
            {% if formation == 1 %}
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(1)">
                        {% if man_of_match == sorted_player_scores['Player'][1] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][1] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][1] }}</div>
                </div>
                <div class="player-position">
                    <div class="icon" onclick="showPopup(2)">
                        {% if man_of_match == sorted_player_scores['Player'][2] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][2] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][2] }}</div>
                </div>
            </div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(3)">
                        {% if man_of_match == sorted_player_scores['Player'][3] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][3] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][3] }}</div>
                </div>
                <div class="player-position">
                    <div class="icon" onclick="showPopup(4)">
                        {% if man_of_match == sorted_player_scores['Player'][4] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][4] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][4] }}</div>
                </div>
            </div>
            {% endif %}
            {% if formation == 2 %}
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(1)">
                        {% if man_of_match == sorted_player_scores['Player'][1] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][1] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][1] }}</div>
                </div>
                <div class="player-position">
                    <div class="icon" onclick="showPopup(2)">
                        {% if man_of_match == sorted_player_scores['Player'][2] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][2] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][2] }}</div>
                </div>
            </div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(3)">
                        {% if man_of_match == sorted_player_scores['Player'][3] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][3] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][3] }}</div>
                </div>
            </div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(4)">
                        {% if man_of_match == sorted_player_scores['Player'][4] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][4] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][4] }}</div>
                </div>
            </div>
            {% endif %}
            {% if formation == 3 %}
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(1)">
                        {% if man_of_match == sorted_player_scores['Player'][1] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][1] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][1] }}</div>
                </div>
            </div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(2)">
                        {% if man_of_match == sorted_player_scores['Player'][2] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][2] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][2] }}</div>
                </div>
                <div class="player-position">
                    <div class="icon" onclick="showPopup(3)">
                        {% if man_of_match == sorted_player_scores['Player'][3] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][3] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][3] }}</div>
                </div>
            </div>
            <div class="player-row">
                <div class="player-position">
                    <div class="icon" onclick="showPopup(4)">
                        {% if man_of_match == sorted_player_scores['Player'][4] %}
                            <i class="fas fa-crown" style="color: rgb(255, 217, 0);"></i>
                        {% endif %}
                    </div>
                    <div class="name">{{ sorted_player_scores['Player'][4] }}</div>
                    <div class="points">{{ sorted_player_scores['Score'][4] }}</div>
                </div>
            </div>
        {% endif %}
            <div class="bench-container">
                <h2>Bench</h2>
                <div class="player-row">
                    {% set player_count = sorted_player_scores['Player']|length %}
                    {% for index in range(5, player_count) %}
                        <div class="player-position">
                            <div class="icon" onclick="showPopup('{{ index }}')"></div>
                            <div class="name">{{ sorted_player_scores['Player'][index] }}</div>
                            <div class="points">{{ sorted_player_scores['Score'][index] }}</div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div id="overlay" class="overlay" onclick="hidePopup()"></div>
        <div id="overlay1" class="overlay" onclick="hideInfoTablePopup()"></div>
        <div id="popup" class="popup" style="display: none;"></div>
    </div>
</body>