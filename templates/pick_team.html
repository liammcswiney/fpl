<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        html {
            height: 100%;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100%;
            background: linear-gradient(135deg, #8e88ff, #64d8cb);
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .top-container {
            width: 80%;
            height: auto;
            margin: 0 auto 20px;
            padding: 0px;
            background: linear-gradient(135deg, #7c75ff, #50e3c34c);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.25);
            z-index: 2;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header {
            width: 70%;
            padding: 0px;
            background:#302d2d16; 
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
            z-index: 2;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header h1 {
            color: #fff;
            text-align: center;
            margin: 15px 0;
            font-size: 25px;
        }

        .button-row {
            display: flex;
            padding-top: 10px;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 0px;
        }

        .button-row h2 {
            color: #fff;
            text-align: center;
            margin: 10px 0;
            font-size: 30px;
            font-weight: bold;
            padding-top: 10px;
        }

        .menu {
            position: relative;
            width: 40%;
            margin: 0 auto;
            background-color: #428bca00; 
            top: -10px;
            padding: 10px; 
            box-sizing: border-box;
            z-index: 1;
        }

        .team-container {
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;
            height: 550px;
            background: linear-gradient(to bottom, 
                #36b017 0%, #36b017 10%, 
                #36b715 10%, #36b715 20%, 
                #36b017 20%, #36b017 30%, 
                #36b715 30%, #36b715 40%, 
                #36b017 40%, #36b017 50%, 
                #36b715 50%, #36b715 60%, 
                #36b017 60%, #36b017 70%, 
                #36b715 70%, #36b715 80%, 
                #36b017 80%, #36b017 90%, 
                #36b715 90%, #36b715 100%);
            position: relative; 
            padding-top: 20px;
            width: 40%;
            margin: 0 auto;
            border: 2px solid #fff;
            z-index: 0;
        }

        .penalty-box1 {
            position: absolute;
            top: 0%; /* Adjust the top position of the penalty box as needed */
            left: 28%; /* Adjust the left position of the penalty box as needed */
            width: 44%; /* Adjust the width of the penalty box as needed */
            height: 15%; /* Adjust the height of the penalty box as needed */
            border-right: 2px solid #fff;
            border-bottom: 2px solid #fff;
            border-left: 2px solid #fff;
            z-index: -1;
        }

        .halfway-line2 {
            position: absolute;
            top: 65%;
            left: 40%;
            width: 20%;
            height: 9.5%;
            border: 2px solid #fff;
            border-radius: 10rem 10rem 0 0;
            z-index: -1;
            box-sizing: border-box;
            background-color: transparent;
            border-bottom: none;
        }



        .player-row {
            display: flex;
            justify-content: space-evenly;
            width: 100%;
        }

        .player-position {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 15%; /* Adjust the width as needed */
            height: 60px;
            margin: 5px; /* Add some margin for spacing */
            padding: 10px; /* Add some padding for spacing */
            background-color: rgba(205, 195, 195, 0.3); /* Adjust the background color */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Add a box shadow effect */
            font-size: 15px; /* Adjust the font size */
            border-radius: 10%;
        }
        
        .player-position .name {
            margin-bottom: 2px; /* Adjust the spacing */
            font-size: 10px; /* Adjust the font size */
        }

        .total-price {
            position: absolute;
            top: 10px;
            right: 10px;
            font-weight: bold;
        }

        .return-button {
            position: absolute;
            top: 10px;
            left: 10px;
        }

        .bench-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #519264a2;
            padding: 0px;
            height: 26%;
            width: 100%; /* Adjust the width as needed */
            border: 2px solid #fff; 
            margin-top: auto; /* Push the bench container to the bottom */
        }

        .bench-container h2 {
            color: white;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .bench-container.bench-boost {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #51d880;
            padding: 0px;
            height: 30%;
            width: 100%; /* Adjust the width as needed */
            border: 2px solid #fff; 
            margin-top: auto; /* Push the bench container to the bottom */
        }

        .bench-container.bench-boost h2 {
            color: rgb(218, 255, 218);
            font-size: 20px;
            margin-bottom: 10px;
        }

        .bench-container .player-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 15%; /* Adjust the width as needed */
            height: 60px;
            margin: 5px; /* Add some margin for spacing */
            padding: 10px; /* Add some padding for spacing */
            background-color: rgba(205, 195, 195, 0.3); /* Adjust the background color */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Add a box shadow effect */
            font-size: 15px; /* Adjust the font size */
            border-radius: 10%;
        }

        .bench-container .player-list li {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }

        .bench-container .player-list .icon {
            width: 35px;
            height: 35px; 
            border-radius: 50%;
            background: linear-gradient(135deg, #76ffea, #00eeffc8);
            border: 0px solid black; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bench-container .player-list .name {
            margin-top: 5px;
            font-size: 10px; 
        }

        .player-info {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .options-button {
            width: 35px;
            height: 35px; 
            border-radius: 50%;
            background: linear-gradient(135deg, #76ffea, #00eeffc8);
            font-size: 14px; /* Adjust the font size */
            margin-top: 5px; /* Add margin for spacing */
            position: relative;
            border: 0px solid black; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); 
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }


        .options-button:hover {
            background-color: #00d5d1;
            transform: scale(1.05); /* Slightly enlarges button on hover for feedback */
        }

        .popup1 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .popup2 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
        }

        .popup3 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
        }

        .popup4 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
        }

        .popup5 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
        }

        .popup6 {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #428bcab9, #8dffeebd);
            width: 300px;
            padding: 20px;
            display: none;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            z-index: 9999;
        }


        .popup-content1 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .popup-content2 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-content3 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-content4 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-content5 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .popup-content6 {
            background-color: #ffffffe3;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }


        .popup-content1 th,
        .popup-content1 td {
            padding: 10px;
        }

        .popup-content2 th,
        .popup-content2 td {
            padding: 10px;
        }

        .popup-content3 th,
        .popup-content3 td {
            padding: 10px;
        }

        .popup-content4 th,
        .popup-content4 td {
            padding: 10px;
        }

        .popup-content5 th,
        .popup-content5 td {
            padding: 10px;
        }

        .popup-content6 th,
        .popup-content6 td {
            padding: 10px;
        }

        .popup-buttons button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #428bca, #00a6ff);
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* subtle shadow to give it a raised look */
            transition: background-color 0.3s ease, box-shadow 0.3s ease; /* smooth transition for hover effects */
        }

        .popup-buttons button:hover {
            background-color: #9fb5c8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* slightly intensified shadow on hover */
        }

        .popup-buttons button:active {
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15); /* pressed-in effect */
            transform: scale(0.98); /* subtle shrink effect to give a pressed feel */
        }

        .captain-letter {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(30%, -125%);
            font-size: 12px;
            font-weight: bold;
            color: white; 
            margin: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .triple-captain-letter {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(30%, -125%);
            font-size: 12px;
            font-weight: bold;
            color: rgb(0, 0, 0); /* Update the color to white */
            margin: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: rgb(255, 255, 255);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3;
        }

        .form-wrapper {
            display: flex;
            gap: 10px; 
        }

        .name {
            margin-top: 5px;
            font-weight: bold;
        }

        .show {
            display: block;
        }

        .return-button {
            position: absolute;
            top: 10px; 
            left: 10px; 
            padding: 5px 15px;
            background-color: #dd0e0e;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease; 
            font-weight: 500;
        }

        .return-button:hover {
            background-color: #cc0d0d;
            transform: scale(1.05);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8); 
            display: none;
            z-index: 999; 
        }

        .chips-row {
            display: flex;
            padding: 10px;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 0px;
        }

        .unused-chips {
            position: relative;
            padding: 5px 10px;
            margin: 0 10px;
            background: linear-gradient(135deg, #faffffd7, #bdfffdcf);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
            color: #282828c6;
            border: 2px solid #333; 
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .active-chips {
            position: relative;
            padding: 5px 10px;
            margin: 0 10px;
            background: linear-gradient(135deg, #5cfffa7b, #23f91fad);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
            color: #535353b4;
            border: 2px solid #333; 
            border-radius: 5px;
            font-size: 16px;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .used-chips {
            position: relative;
            padding: 5px 10px;
            margin: 0 10px;
            background: #94949481;
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
            color: #ffffff8a;
            border: 2px solid #333; 
            border-radius: 5px;
            font-size: 16px;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .triple-captain {
            position: relative;
            padding: 10px 20px; 
            border: none;
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.271);
        }

        .modal {
            display: none; 
            position: fixed; 
            z-index: 10;
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.8); 
            padding-top: 60px;
        }

        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #d5fff8, #a7fff2);
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            max-height: 60vh;
            border: 2px solid #000000; 
            border-radius: 4%;
            text-align: center;
            display: inline-block; 
            margin: 5px;
            padding: 10px;
        }

        .popup-button {
            padding: 8px 16px;
            color: #252525;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* subtle shadow to give it a raised look */
            transition: background-color 0.3s ease, box-shadow 0.3s ease; /* smooth transition for hover effects */
        }

        .popup-button:hover {
            background-color: #9fb5c8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* slightly intensified shadow on hover */
        }

        .popup-button:active {
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15); /* pressed-in effect */
            transform: scale(0.98); /* subtle shrink effect to give a pressed feel */
        }

        .popup-button.confirm {
            background: linear-gradient(135deg, #5cfffa7b, #23f91fad);
        }

        .popup-button.cancel {
            background: linear-gradient(135deg, #ff78787b, #ff2222ad);
        }

    </style>
<script>
    function goBack() {
        var teamName = "{{ team_name }}";
        window.location.href = "/team_management/{{ team_name }}";
    }
    
    function togglePopup(number) {
        const popup = document.querySelector('.popup' + number);
        const overlay = document.getElementById('modalOverlay');
        const injuryDivRed = popup.querySelector('[data-color-red]');
        const injuryDivYellow = popup.querySelector('[data-color-yellow]');

        if (injuryDivRed) {
            popup.style.background = "rgba(255, 0, 0, 0.7)";
        }

        if (injuryDivYellow) {
            popup.style.background = "rgba(255, 221, 0, 0.7)";
        }
        
        // Toggling the popup visibility using class
        popup.classList.toggle('show');

        // If popup is visible, show the overlay, else hide it
        if (popup.classList.contains('show')) {
            overlay.style.display = 'block';
            popup.style.display = 'block';
        } else {
            overlay.style.display = 'none';
        }
        
    }

    function hidePopup() {
        const popups = document.querySelectorAll('.popup1, .popup2, .popup3, .popup4, .popup5, .popup6');
        const overlay = document.getElementById('modalOverlay');

        popups.forEach(popup => {
            popup.style.display = 'none';
            popup.classList.remove('show');  // ensure the class is removed
        });

        overlay.style.display = 'none';
    }


    document.addEventListener('DOMContentLoaded', function() {
        const optionsButtons = document.querySelectorAll('.options-button');
        
        optionsButtons.forEach(function(button) {
            const popupNumber = button.getAttribute('data-popup-number');
            
            button.addEventListener('click', function() {
                togglePopup(popupNumber);
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        var currentChip = null; 
        var modal = document.getElementById("confirmModal");

        window.openWildcardModal = function() {
            openModal("Wildcard", "Are you sure you want to use the Wildcard chip?");
        }

        window.openLimitlessModal = function() {
            openModal("Limitless", "Are you sure you want to use the Limitless chip?");
        }

        window.openTripleCaptainModal = function() {
            openModal("Triple Captain", "Are you sure you want to use the Triple Captain chip?");
        }

        window.openBenchBoostModal = function() {
            openModal("Bench Boost", "Are you sure you want to use the Bench Boost chip?");
        }


        function openModal(chip, message) {
            currentChip = chip;
            modal.style.display = "block";
            document.getElementById("modalMessage").textContent = message;
        }

        document.getElementById("cancelButton").addEventListener("click", function() {
            console.log("Cancel button clicked");
            modal.style.display = "none";
        });

        document.getElementById("confirmButton").addEventListener("click", function() {
            modal.style.display = "none";
            if (currentChip) {
                var url = "/use_chip/{{ team_name }}/" + currentChip;
                fetch(url, { method: 'POST' })
                    .then(response => {
                        if (!response.ok) throw Error(response.statusText);
                        return response;
                    })
                    .then(response => {
                        location.reload();
                    })
                    .catch(error => console.error('Error:', error));
            }
        });
    });


</script>
</head>
<body>

    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <p id="modalMessage">Default message</p>
            <p>Once it is activated, it cannot be changed.</p>
            <button id="confirmButton" class="popup-button confirm">Yes</button>
            <button id="cancelButton" class="popup-button cancel">No</button>
        </div>
    </div>

    <div class="top-container">
        <div class="header">
            <h1>Select {{ next_gw }} Lineup:</h1>
        </div>
        <div class="button-row">
            <h2>
                <span style="font-weight: bold; display: block;">
                    {{ fixtures_data.loc[fixtures_data['Gameweek'] == next_gw_int, 'Fixture'].values[0] }}
                </span>
            </h2>        
        </div>   
        <div class="chips-row">
            {% if chips_data['Wildcard'].values[team_index] == 1 %}
                <span class="active-chips triple-captain">Wildcard</span>
            {% elif chips_data['Wildcard'].values[team_index] == 2 or chips_data['Triple Captain'].values[team_index] == 1 or chips_data['Bench Boost'].values[team_index] == 1 or chips_data['Limitless'].values[team_index] == 1 %}
                <span class="used-chips triple-captain">Wildcard</span>
            {% else %}
                <button class="unused-chips triple-captain" onclick="openWildcardModal()">Wildcard</button>
            {% endif %}

            {% if chips_data['Limitless'].values[team_index] == 1 %}
                <span class="active-chips triple-captain">Limitless</span>
            {% elif chips_data['Limitless'].values[team_index] == 2 or chips_data['Triple Captain'].values[team_index] == 1 or chips_data['Bench Boost'].values[team_index] == 1 or chips_data['Wildcard'].values[team_index] == 1 %}
                <span class="used-chips triple-captain">Limitless</span>
            {% else %}
                <button class="unused-chips triple-captain" onclick="openLimitlessModal()">Limitless</button>
            {% endif %}

            {% if chips_data['Triple Captain'].values[team_index] == 1 %}
                <span class="active-chips triple-captain">Triple Captain</span>
            {% elif chips_data['Triple Captain'].values[team_index] == 2 or chips_data['Wildcard'].values[team_index] == 1 or chips_data['Bench Boost'].values[team_index] == 1 or chips_data['Limitless'].values[team_index] == 1 %}
                <span class="used-chips triple-captain">Triple Captain</span>
            {% else %}
                <button class="unused-chips triple-captain" onclick="openTripleCaptainModal()">Triple Captain</button>
            {% endif %}

            {% if chips_data['Bench Boost'].values[team_index] == 1 %}
                <span class="active-chips triple-captain">Bench Boost</span>
            {% elif chips_data['Bench Boost'].values[team_index] == 2 or chips_data['Wildcard'].values[team_index] == 1 or chips_data['Triple Captain'].values[team_index] == 1 or chips_data['Limitless'].values[team_index] == 1 %}
                <span class="used-chips triple-captain">Bench Boost</span>
            {% else %}
                <button class="unused-chips triple-captain" onclick="openBenchBoostModal()">Bench Boost</button>
            {% endif %}       
        </div>                  
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <div class="menu">
        <button class="return-button" onclick="goBack()">X
    </div>
    <div class="container">
        <div class="team-container">
            <div class="penalty-box1"></div>
            <div class="halfway-line2"></div>
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 1'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="1"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="1"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="1">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% if team_data['Bench'] == team_data['Player 3'] %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 2'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2">
                                        {% if team_data['Captain'] == player['Player'] %}
                                            {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% elif team_data['Bench'] == team_data['Player 2'] %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 3'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 2'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="2">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 3'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="3">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            {% if team_data['Bench'] == team_data['Player 5'] %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 4'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% elif team_data['Bench'] == team_data['Player 4'] %}
            <div class="player-row"> 
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 5'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% else %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 4'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="4">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 5'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="5">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            {% if team_data['Bench'] != team_data['Player 6'] %}
            <div class="player-row">
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 6'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div class="player-position" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="6"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div class="player-position" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="6"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i>
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% else %}
                            <div class="player-position">
                                <div class="player-info">
                                    <button class="options-button" data-popup-number="6">
                                    {% if team_data['Captain'] == player['Player'] %}
                                        {% if chip_used == 'Triple Captain' %}
                                            <span class="triple-captain-letter">C</span>
                                        {% else %}
                                            <span class="captain-letter">C</span>
                                        {% endif %}
                                    {% endif %}
                                    </button>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            <div class="{{ 'bench-container bench-boost' if chip_used == 'Bench Boost' else 'bench-container' }}">
                <h2>Bench</h2>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Bench'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <ul class="player-list" style="background-color: #ff00007f;">
                                <div class="player-info">
                                    <div class="icon"><i class="fa fa-exclamation-triangle" style="color: #ff0000;"></i></div>
                                    <div class="name">{{ team_data['Bench'] }}</div>
                                </div>
                            </ul>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <ul class="player-list" style="background-color: #fffb007f;">
                                <div class="player-info">
                                    <div class="icon"><i class="fa fa-exclamation-triangle" style="color: #fbff00;"></i></div>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </ul>
                        {% else %}
                            <ul class="player-list">
                                <div class="player-info">
                                    <div class="icon"></div>
                                    <div class="name">{{ player['Player'] }}</div>
                                </div>
                            </ul>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="modalOverlay" onclick="hidePopup()">
        <div class="popup1">
            <div class="popup-content1">
                <h3>{{ team_data['Player 1'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 1'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 255, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 1'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 1']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>

        <div class="popup2">
            <div class="popup-content2">
                <h3>{{ team_data['Player 2'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 2'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 221, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 2'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_team_data/{{ team_name }}/{{ team_data['Player 2']|urlencode }}" method="POST">
                            <button type="submit">Substitute</button>
                        </form>
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 2']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>
        <div class="popup3">
            <div class="popup-content3">
                <h3>{{ team_data['Player 3'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 3'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 221, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 3'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_team_data/{{ team_name }}/{{ team_data['Player 3']|urlencode }}" method="POST">
                            <button type="submit">Substitute</button>
                        </form>
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 3']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>
        <div class="popup4">
            <div class="popup-content4">
                <h3>{{ team_data['Player 4'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 4'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 221, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 4'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_team_data/{{ team_name }}/{{ team_data['Player 4']|urlencode }}" method="POST">
                            <button type="submit">Substitute</button>
                        </form>
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 4']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>
        <div class="popup5">
            <div class="popup-content5">
                <h3>{{ team_data['Player 5'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 5'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 221, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 5'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_team_data/{{ team_name }}/{{ team_data['Player 5']|urlencode }}" method="POST">
                            <button type="submit">Substitute</button>
                        </form>
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 5']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>
        <div class="popup6">
            <div class="popup-content6">
                <h3>{{ team_data['Player 6'] }}</h3>
                {% for player in injury_data %}
                    {% if player['Player'] == team_data['Player 6'] %}
                        {% if player['injury_colour'] == 'Red' %}
                            <div data-color-red="red" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                Expected back: {{ player['return_date'] }}
                            </div>
                        {% elif player['injury_colour'] == 'Yellow' %}
                            <div data-color-yellow="rgb(255, 221, 0)" style="background-color: rgb(255, 221, 0); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px;">
                                {{ player['injury_type'] }}<br>
                                {{ player['return_date'] }} chance of playing
                            </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <table id="player-stats" class="stats-table">
                    <tr>
                        <th>Price</th>
                        <th>Form</th>
                        <th>Total Score</th>
                    </tr>
                    {% for i in range(player_data['Player']|length) %}
                        {% if player_data['Player'][i] == team_data['Player 6'] %}
                            <tr>
                                <td>{{ player_data['Price'][i] }}</td>
                                <td>{{ player_data['Form'][i] }}</td>
                                <td>{{ player_data['Total Points'][i] }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
                <div class="popup-buttons">
                    <div class="form-wrapper">
                        <form action="/update_team_data/{{ team_name }}/{{ team_data['Player 6']|urlencode }}" method="POST">
                            <button type="submit">Substitute</button>
                        </form>
                        <form action="/update_captain/{{ team_name }}/{{ team_data['Player 6']|urlencode }}" method="POST">
                            <button type="submit">Make Captain</button>
                        </form>
                    </div>
                    <br>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
